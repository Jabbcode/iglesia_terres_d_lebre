generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ==================== ENUMS ====================

enum Role {
  ADMIN
  EDITOR
}

enum ImageSpan {
  normal
  tall
  wide
}

enum Periodicidad {
  ninguna
  semanal
  quincenal
  mensual
  anual
}

// ==================== MODELS ====================

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  name      String
  role      Role     @default(ADMIN)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model ConfigSitio {
  id                String   @id @default("default")
  // General
  nombreIglesia     String   @default("Iglesia Biblica Terres de l'Ebre")
  descripcion       String   @default("Somos una familia de fe")
  // Redes sociales
  instagram         String?
  facebook          String?
  youtube           String?
  // Contacto
  direccion         String?
  telefono          String?
  email             String?
  horarioAtencion   String?
  googleMapsUrl     String?
  googleMapsEmbed   String?
  updatedAt         DateTime @updatedAt
}

model Imagen {
  id        String    @id @default(cuid())
  src       String
  alt       String    @default("")
  span      ImageSpan @default(normal)
  order     Int       @default(0)
  activo    Boolean   @default(false)
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
}

model Evento {
  id            String       @id @default(cuid())
  nombre        String
  descripcion   String?
  fecha         DateTime     // Fecha base del evento
  horaInicio    String
  horaFin       String?
  ubicacion     String?
  periodicidad  Periodicidad @default(ninguna)
  repetirHasta  DateTime?    // Fecha límite para eventos periódicos
  activo        Boolean      @default(true)
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt
}

model Horario {
  id               String   @id @default(cuid())
  titulo           String
  subtitulo        String?  // Para formato "Estudio Bíblico *semanal*"
  descripcion      String?
  descripcionLarga String?  // Descripción extendida para sección de detalle
  dia              String   // "Domingos", "Miercoles", "Sabados"
  hora             String   // "11:00h"
  icono            String   @default("Church") // Lucide icon name
  imagen           String?  // URL de imagen para sección de detalle
  mostrarDetalle   Boolean  @default(false) // Si aparece en la sección inferior
  order            Int      @default(0)
  activo           Boolean  @default(true)
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
}

model Testimonio {
  id          String   @id @default(cuid())
  nombre      String
  descripcion String
  videoUrl    String
  thumbnail   String
  order       Int      @default(0)
  activo      Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}